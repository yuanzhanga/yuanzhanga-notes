在VUE中使用REACT组件

src/views/wms-basic/storage-area-setting/outbound-staging-location/hybrid.ts文件

import reactContainerFactory from '@/components/react-container/reactContainerFactory';
import { FC, lazy, LazyExoticComponent } from 'react';

export const CheckingStagingCompFactory = reactContainerFactory({//用于将 React 组件包装成可以在 Vue 中使用的组件
  name: 'outboundstaging.checking',
});

export const checkingStagingComp = (): LazyExoticComponent<FC> =>//懒加载函数
  lazy(
    () =>
      import(
        '@/react-app/pages/wms-basic/storage-area-setting/outbound-staging-location/checking-staging'
      )
  );

vue集成react
      vue-router
    vue         容器处理
vue2,vuex3   react17,zustand
Vuex Store与React组件间的通讯基于 React.useSyncExternalStore 封装

状态管理方案： 核心诉求是：可跨react应用共享。由于React应用被挂载在Vue路由下，每次切换页面都会经历卸载和重新渲染react应用的过程，所以可跨react应用的状态共享方案是必须的
选用 zustand 方案，其主要特性如下：
  全局状态持久化存储，可跨react应用共享
  框架无关，状态可在react组件外、vue中被使用
  写法简洁，贴合hooks
  有middleware机制，社区第三方实现丰富
  支持同步和异步action
  Typescript友好
  原子化状态设计，可实现Code Splitting

大概代码：
vue文件中：
<component :is="component" v-bind="props"/>
component: reactContainerFactory1️⃣({name属性}), //一个vue组件，在里面去调用函数渲染react组件
props: { component: LazyExoticComponent }, //一个懒加载函数，import加载react组件文件   

1️⃣onMounted(() => {
  renderReactComponent2️⃣(
    propComponent4️⃣, //传入的懒加载函数LazyExoticComponent
    rootRef.value5️⃣, //要挂载的ref节点
    attrs //所带的属性
  )
});

2️⃣render(
  <Wrapper>3️⃣ //包装react组件的组件，包括国际化，组件库配置，store配置等
    <Com4️⃣ {...props} /> //执行懒加载函数生成的react组件和所带属性
  </Wrapper>,
  rootNode5️⃣ //挂载节点
)


padStart(n, t)向左用t补全字符，直到达到指定长度n


权限脚本cicd
1.双向匹配策略
从 PermissionKey 向下找 URL
从 API 调用向上找 PermissionKey
确保两种写法都能被识别
2.行号精确定位
利用 Git diff 的行号信息
通过行号直接定位到源码对应行
避免全文扫描，提升效率
3.多分隔符支持
支持 &、|、,、# 等分隔符
自动去重，避免重复上传

确定用户和分支名
  ↓
Git Diff
  ↓
line-number.sh 解析
  ↓
diff 文件（内容改变的行号:代码内容）
  ↓
_getPermissonRes() diff文件逐行解析，正则匹配文件名、文件里的权限点、API URL
  ↓
文件结构数组（文件名、权限点、API URL）
[
  {
    fileName: 'src/api/task-center/reassessment-task.ts',
    permissions: [
      { permissionKey: 'PC.Inbound.Task.ReassessmentTask.View', line: '59' }
    ],
    apis: [
      { url: '/api/v2/apps/process/inbound/poqc/create_communication', line: '60' }
    ]
  }
]
  ↓
_handleNotePermission() 匹配
  ↓
将源文件根据行依次添加到数组进行匹配工作
权限-URL 配对列表 双向匹配：根据对应line值确定数组行位置 从 PermissionKey 向下找 URL，从 API 向上找 PermissionKey
  ↓
_formatSuccessList() 格式化权限列表 处理&｜，#特殊字符
  ↓
最终权限列表 [{be_key, url}, ...]
  ↓
batchUploadPermission() 上传
  ↓
使用用户邮箱生成JWT 根据分支名确定jira单号
发送HTTP请求 服务器绑定权限
  ↓
deleleDiffFile() 清理diff文件

注：有新接口需要绑定权限接口映射时，需要先等pipeline自动化脚本执行完权限脚本cicd的操作再合并mr


toLocaleString用法
n.toLocaleString();// 可做千位分隔符
n.toLocaleString('zh-CN', {
style: 'currency/percent/unit',
currency: 'CNY' // 人民币
minimumFractionDigits: 2    // 强制两位小数
unit: 'meter-per-second',//单位
}); 
new Date().toLocaleString('zh-CN');// → "2026/1/21 15:08:45"

<img loading="lazy"> 图片懒加载

object-fit:cover，它能够指定可替换元素的内容（也就是图片）该如何适应它的父容器的高宽
scroll-snap-type：属性定义在滚动容器中的一个临时点（snap point）如何被严格的执行.这个属性规定了一个容器是否对内部滚动动作进行捕捉，并且规定了如何去处理滚动结束状态。让滚动操作结束后，元素停止在适合的位置

Firebase 云信息传递 (FCM) 是一种跨平台消息传递解决方案，可供您免费、可靠地传递消息。
使用 FCM，可以通知客户端应用存在可同步的新电子邮件或其他数据。在即时消息传递等使用情形中，一条消息可将最大 4KB 的有效负载传送至客户端应用